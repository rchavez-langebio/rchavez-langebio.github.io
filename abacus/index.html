<h1>Submitting jobs to ABACUS</h1>
<p><a href="http://www.abacus.cinvestav.mx/">ABACUS</a> uses the Simple Linux Utility for Resource Management, aka <strong>slurm</strong>. Information on slurm options can be obtained at http://slurm.schedmd.com/sbatch.html</p>
<h4>CPU nodes:</h4>
<p>The ABACUS supercomputer has 268 CPU nodes and each node has 2 <a href="http://ark.intel.com/products/81059/Intel-Xeon-Processor-E5-2697-v3-35M-Cache-2_60-GHz">Intel Xeon E5-2697V3 @ 2.60 GHz CPUs</a>. Each processor has 14 cores and 28 threads. This means that for each node you can request up to 56 (2 x 28) tasks (threads): In slurm this is: <code>-N [1..268]</code> or <code>--nodes=[1..268]</code> and <code>-n [1..56]</code> or <code>--ntasks=[1..56]</code></p>
<h4>CPU time:</h4>
<p>Abacus has a strict policy regarding CPU usage, and therefore it is imperative that requested CPU time is accurate. In slurm time is requested: For jobs lasting up to 24 hours: <code>-t HH:MM:SS</code> or <code>--time=HH:MM:SS</code> For jobs lasting more than 24 hours: <code>-t DD-HH:MM:SS</code> or <code>--time=DD-HH:MM:SS</code></p>
<h4>Partitions (queues):</h4>
<p>The number of hours or days requested will determine the partition (queue) to be used. Abacus has 3 CPU partitions: <strong>1-28cpu-1d</strong> (jobs lasting up to 24 hours), <strong>1-28cpu-7d</strong> (jobs lasting up to 7 days) and <strong>1-28cpu-30d</strong> (jobs lasting up to 1 month), which are requested using: <code>-p partition_name</code> or <code>--partition=partition_name</code></p>
<p>You should also indicate the name of your job, preferably the name of the program used: <code>-J jobname</code> or <code>--job-name=jobname</code></p>
<p>And standard output and standard error can be directed using: <code>-e error_filename</code> or <code>--error=error_filename</code> <code>-o output_filename</code> or <code>--output=output_filename</code></p>
<h4>Examples:</h4>
<p>A slurm script header for a blastn job that requests 1 node, 20 threads and 1 hour of CPU time should therefore look like this: <code>bash #SBATCH -N 1 #SBATCH -n 20 #SBATCH -p 1-28cpu-1d #SBATCH -t 01:00:00 #SBATCH -J blastn #SBATCH -e blastn.err #SBATCH -o blastn.out</code> or in long form option: <code>bash #SBATCH --nodes=1 #SBATCH --ntasks=20 #SBATCH --partition=1cpu1-28 #SBATCH --time=01:00:00 #SBATCH --job-name=blastn #SBATCH --error=blastn.err #SBATCH --output=blastn.out</code> A slurm script header for a blastn job that requests 10 nodes, 56 threads per node and 6 days should look like this: <code>bash #SBATCH -N 10 #SBATCH -n 56 #SBATCH -p 1-28cpu-7d #SBATCH -t 06-00:00:00 #SBATCH -J blastn #SBATCH -e blastn.err #SBATCH -o blastn.out</code></p>
